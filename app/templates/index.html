{% extends "bootstrap/base.html" %}
{% block title %}Home{% endblock %}

{% block navbar %}
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="#">
            Dublin Bike Station
{#                <img src="{{url_for('.static', filename='')}}" width="100" height="100" class="d-inline-block align-top" alt="">#}
        </a>
    </nav>
{% endblock navbar %}

{% block content %}
    <div id="googleMap" style="width:70%;height:600px;"></div>
    <script>
        function myMap() {
            let mapProp = {
                center: new google.maps.LatLng(53.3471, -6.26059),
                zoom: 13,
            };
            let image = {
                url: 'static/img/map.png',
                scaledSize: new google.maps.Size(20, 20),
                origin: new google.maps.Point(0, 0),
            };
            let map = new google.maps.Map(document.getElementById('googleMap'), mapProp);
            {% for s in station_list %}
                var pos = {lat: {{ s.latitude }}, lng: {{ s.longitude }}};
                var marker = new google.maps.Marker({position: pos, map: map, icon: image});
                var content = "NAME: {{ s.name }}";
                content += "NUMBER: {{ s.number }}";
                show_info(marker, content);
            {% endfor %}

        }
        function show_info(marker,content) {
            var infowindow = new google.maps.InfoWindow({
                content: content
            });
            marker.addListener('click', function () {
                infowindow.open(marker.get('map'), marker);
            });
        }
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBHMQwOzFCfEDBkg02vTwia0miOocA8Od0&callback=myMap"></script>
{% endblock %}

