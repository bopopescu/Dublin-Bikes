{% extends "bootstrap/base.html" %}
{% block title %}Home{% endblock %}

{% block navbar %}
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="#">
            {#    <img src="{{url_for('.static', filename='img/bikes-logo.png')}}" width="100" height="100" class="d-inline-block align-top" alt="">#}
            Bike Station List
        </a>
    </nav>
{% endblock navbar %}

{% block content %}
    <div id="googleMap" style="width:70%;height:600px;"></div>
    <script type="text/javascript" src="static/Dublin_Bike_Station.json"></script>
    <script>
        function myMap() {
            var mapProp = {
                center: new google.maps.LatLng(53.3471, -6.26059),
                zoom: 13,
            };
            var image = {
                url: 'static/img/map.png',
                // This marker is 20 pixels wide by 32 pixels high.
                scaledSize: new google.maps.Size(20, 20),
                // The origin for this image is (0, 0).
                origin: new google.maps.Point(0, 0),
                // The anchor for this image is the base of the flagpole at (0, 32).
                {#anchor: new google.maps.Point(0, 32)#}
            };
            var map = new google.maps.Map(document.getElementById('googleMap'), mapProp);
            {% for s in station_list %}
                var pos = {lat: {{ s.latitude }}, lng: {{ s.longitude }}};
                var marker = new google.maps.Marker({position: pos, map: map, icon: image});
                show_info(marker);
            {% endfor %}

        }

        function show_info(marker) {
            var infowindow = new google.maps.InfoWindow({
                content: "Here is a bike station."
            });
            marker.addListener('click', function () {
                infowindow.open(marker.get('map'), marker);
            });
        }
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBHMQwOzFCfEDBkg02vTwia0miOocA8Od0&callback=myMap"></script>
{% endblock %}

